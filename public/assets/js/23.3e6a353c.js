(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{520:function(t,e,r){"use strict";r.r(e);var v=r(4),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h4",{attrs:{id:"记录一下项目中的踩坑"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#记录一下项目中的踩坑"}},[t._v("#")]),t._v(" 记录一下项目中的踩坑")]),t._v(" "),r("p",[r("strong",[t._v("问题一.搜索框点击清除按钮时按钮提前消失导致点击事件不触发问题")])]),t._v(" "),r("p",[t._v("原因：在搜索框blur事件中对按钮进行了隐藏，点击清除按钮的时候，blur事件先触发，所以点击无效。")]),t._v(" "),r("p",[t._v("解决办法：在blur事件中设置定时器，让隐藏按钮的操作延迟执行，使得点击事件能够执行。")]),t._v(" "),r("p",[r("strong",[t._v("问题二.  过渡进入阶段失效问题")])]),t._v(" "),r("p",[t._v("初始过渡不渲染可以通过设置 appear 设置节点在初始渲染阶段的过渡，可以在 enter 钩子函数中强制浏览器重新渲染，例如 offsetHeight 等属性")]),t._v(" "),r("p",[r("strong",[t._v("问题三. 使用路由 params 传值，页面刷新后 params 值消失问题")])]),t._v(" "),r("p",[t._v("页面刷新是 params 参数会消失，query 确不会，但是使用 query 参数会显示在地址栏中，不美观。")]),t._v(" "),r("p",[t._v("解决方法：可以将值存储到 localStorage，页面刷新后从本地存储中取值")]),t._v(" "),r("p",[r("strong",[t._v("问题四. Cube-Scroll 下拉刷新会强制先到顶部，无法停留在原来的位置")])]),t._v(" "),r("p",[t._v("在聊天页面中一个需求是希望下拉加载数据后能够保持在原来的位置，Cube-Ui Scroll 组件可以开启下拉刷新选项，但是下拉刷新数据加载后会回到顶部第一条数据的位置，即使设置为停留时长为 0，回滚后依旧会出现抖动、滚动位置不准确等问题。")]),t._v(" "),r("p",[t._v("思考很久后决定放弃 Cube-UI 提供的下拉刷新选项。但是在内容高度小于 Scroll 组件时，无法产生滚动。")]),t._v(" "),r("p",[t._v("通过观察 Cube-UI 内部样式发现Cube-UI 内层元素设置了 min-height 属性值大于父容器高度后就可以产生滚动。于是，在 mounted 周期获取父容器高度，设置内层包裹元素的最小高度值大于父容器高度即可。在 scroll-end 事件触发时更新数据，获得原来的列表高度，在 Vue.$nextTick() 方法中获得更新后的列表高度，两者相减即可得到回滚的位置。")])])}),[],!1,null,null,null);e.default=_.exports}}]);